<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roommate Info</title>
    <link rel="icon" type="image/x-icon" href="https://storage.cloud.google.com/logo_mavcomplete/favicon.png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    
    <nav class="navbar navbar-dark bg-secondary">
        <a class="navbar-brand" href="index.html">
          <img class="logo" src="https://storage.cloud.google.com/logo_mavcomplete/png/logo-color.png" width="80" height="60" class="d-inline-block align-top" alt="logo" loading="lazy"></a>
        
        <ul class = "nav_links">
            <div>
                <li><strong><a href="login.html">Login</a></strong></li>
                <li><strong><a href="signup.html">Signup</a></strong></li>
            </div>
        </ul>
        </a>
    </nav>
</head>
  <body>
    <br><br>
    <h1>Submit Roommate Info</h1>
    <form>
        <ul>
            <li><label for="fname">First Name:</label></li>
            <li><input type="text" id="fname" name="fname" placeholder="First" required></li>
            <br>
            <li><label for="lname">Last Name:</label></li>
            <li><input type="text" id="lname" name="lname" placeholder="Last" required></li>
            <br>
            <li><label for="age">Age:</label>
            <input type="number" id="age" name="age" required ></li>
            <br>
            <br>
            <label for="gender">Gender</label>
            <select name="gender" id="gender">
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
            </select><br>


            <label for="neat">How tidy are you?</label>
            <select name="tidy" id="tidy">
                <option value="verytidy">Very Tidy</option>
                <option value="tidy">Tidy</option>
                <option value="bmessy">A bit Messy</option>
                <option value="messy">Messy</option>
              </select><br>

            <label for="noisey">How much noise do you prefer when studying? </label>
            <select name="noise" id="noise">
                <option value="quiet">Quiet</option>
                <option value="Sometimesloud">A bit noisey</option>
                <option value="alittleloud">A little loud</option>
                <option value="loud">Loud</option>
              </select><br>


            <label for="sharing">I like to share items in my room:  </label>
            <select name="share" id="share">
                <option value="always">Always</option>
                <option value="askfirst">Ask first</option>
                <option value="sometimes">Only Sometimes</option>
                <option value="never">Not at all</option>
              </select><br>

            <label for="wakeup">When do you wake up? </label>
            <select name="wake" id="wake">
                <option value="early">Earlybird</option>
                <option value="Afternoon">Around 8:00 AM</option>
                <option value="noon">Noon</option>
                <option value="not fixed">Depends on the day</option>
              </select><br>

            <label for="books">How often do you study?  </label>
            <select name="study" id="study">
                <option value="always">Always</option>
                <option value="sometimes">Sometimes</option>
                <option value="rarely">Rarely</option>
                <option value="never">Depends on the day</option>
              </select><br>

            <label for="drink">How often do you drink alcohol?</label>
            <select name="alcohol" id="alcohol">
                <option value="never">Never</option>
                <option value="sometimes">Sometimes</option>
                <option value="socially">Socially</option>
                <option value="regular">Regularly</option>
              </select><br>

            <label for="smoke">Do you smoke?</label>
            <select name="smoking" id="smoking">
                <option value="never">Never</option>
                <option value="rarely">Rarely</option>
                <option value="socially">Socially</option>
                <option value="chainsmoker">Chainsmoker</option>
              </select><br>

            <label for="social">How social are you?</label>
            <select name="intro" id="intro">
                <option value="introvert">Introvert</option>
                <option value="bsocial">Keeping a small circle</option>
                <option value="ssocial">Party Sometimes</option>
                <option value="extrovert">Extrovert</option>
              </select><br>

            <label for="outing">How often will you go away on weekend?</label>
            <select name="partying" id="partying">
                <option value="rarely">Rarely</option>
                <option value="once">Once a week</option>
                <option value="twice">Twice a week</option>
                <option value="regular">Always out</option>
              </select><br>

            <label for="outing">How often do you attend social functions?</label>
            <select name="out" id="out">
                <option value="anever">Almost Never</option>
                <option value="stimes">Sometimes</option>
                <option value="balanced">In a balanced way</option>
                <option value="panimal">You won't find me home</option>
              </select><br>

            <label for="game">How often do you play video games?</label>
            <select name="gaming" id="gaming">
                <option value="Alw">Always</option>
                <option value="stimes">Sometimes</option>
                <option value="never">Never</option>
              </select><br>

        </ul>
        <input type="button" value="Submit" id="submit">
        <input type="reset" value="Login">
    </form>
    <br><br><br>

    
    <h1>Roommate selection</h1>  
      <div class = "container mt-3">
        <table class = "table">
          <thead>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Age</th>
            <th>Gender</th>
            <th>Neatness</th>
            <th>Noise during studying</th>
            <th>Sharing</th>
            <th>Waking up?</th>
            <th>Study</th>
            <th>Drinks</th>
            <th>Smoking</th>
            <th>Social</th>
            <th>Outing</th>
            <th>Attending social functions</th>
            <th>Playing video games</th>
        </thead>
        <tbody id="body1"></tbody>
        </table>
      </div>



  </body>

    <script type="module">
        // let rommates = [];
        // const addmember = (ev)=>{
        //     ev.preventDefault(); 
        //     let member = {
        //         id: Date.now(),
        //         fname: document.getElementById('fname').value,
        //         lname: document.getElementById('lname').value,
        //         age: document.getElementById('age').value,
        //         gender: document.getElementById('gender').value,
        //         tidy: document.getElementById('tidy').value,
        //         noise: document.getElementById('noise').value,
        //         share: document.getElementById('share').value,
        //         wake: document.getElementById('wake').value,
        //         study: document.getElementById('study').value,
        //         alcohol: document.getElementById('alcohol').value,
        //         smoking: document.getElementById('smoking').value,
        //         intro: document.getElementById('intro').value,
        //         partying: document.getElementById('partying').value,
        //         out: document.getElementById('out').value,
        //         gaming: document.getElementById('gaming').value,
        //     }
        //     console.log(member);
        //     rommates.push(member);
        //     document.forms[0].reset(); 
            

        //     //for display purposes only
        //     // console.warn('added' , {rommates} );
        //     // let pre = document.querySelector('#msg pre');
        //     textContent = '\n' + JSON.stringify(rommates, '\t', 2);
        //     console.log(textContent)
        // }
        // document.addEventListener('DOMContentLoaded', ()=>{
        //     document.getElementById('submit').addEventListener('click', addmember);
        // });

      
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-analytics.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyCwNYjaR8ab1W9rwsGVGGGqc3tArqmTvjc",
          authDomain: "heroic-cedar-370702.firebaseapp.com",
          databaseURL: "https://heroic-cedar-370702-default-rtdb.firebaseio.com",
          projectId: "heroic-cedar-370702",
          storageBucket: "heroic-cedar-370702.appspot.com",
          messagingSenderId: "272747947004",
          appId: "1:272747947004:web:65b0f7226ac6693da04879",
          measurementId: "G-7ES4PEY8YC"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js";
        // import { } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";
        const db = getFirestore();


                // let id = Date.now();
                // let fname = document.getElementById('fname').value;
                // let lname = document.getElementById('lname').value;
                // let age =  document.getElementById('age').value;
                // let gender = document.getElementById('gender').value;
                // let tidy = document.getElementById('tidy').value;
                // let noise = document.getElementById('noise').value;
                // let share = document.getElementById('share').value;
                // let wake = document.getElementById('wake').value;
                // let study = document.getElementById('study').value;
                // let alcohol = document.getElementById('alcohol').value;
                // let smoking = document.getElementById('smoking').value;
                // let intro = document.getElementById('intro').value;
                // let partying = document.getElementById('partying').value;
                // let out = document.getElementById('out').value;
                // let gaming = document.getElementById('gaming').value;

        async function AddDocument_AutoID(){
          var ref = collection(db, "mavcomplete-fs-roommate");
          

          const docRef = await addDoc(
            //
            ref,{
                  
                fname: document.getElementById('fname').value,
                lname: document.getElementById('lname').value,
                age: document.getElementById('age').value,
                gender: document.getElementById('gender').value,
                tidy: document.getElementById('tidy').value,
                noise: document.getElementById('noise').value,
                share: document.getElementById('share').value,
                wake: document.getElementById('wake').value,
                study: document.getElementById('study').value,
                alcohol: document.getElementById('alcohol').value,
                smoking: document.getElementById('smoking').value,
                intro: document.getElementById('intro').value,
                partying: document.getElementById('partying').value,
                out: document.getElementById('out').value,
                gaming: document.getElementById('gaming').value
              

            }
          )
          //.. Uid
          .then(() => {
            alert ("Document successfully written!");
            
          })
          .catch((error) => {
            alert ("Error writing document: "+ error);
          });
          
        }
        document.addEventListener('DOMContentLoaded', ()=>{
            document.getElementById('submit').addEventListener('click', AddDocument_AutoID);
          });
          

          var tbody = document.getElementById("body1");
          var sno = 0;
      function additemstotable(fn, ln, a, g, n, no, sh, wk, st, da, sm, so, ou, sf, vg){
        let trow = document.createElement("trow");
        let td1 = document.createElement("td1");
        let td2 = document.createElement("td2");
        let td3 = document.createElement("td3");
        let td4 = document.createElement("td4");
        let td5 = document.createElement("td5");
        let td6 = document.createElement("td6");
        let td7 = document.createElement("td7");
        let td8 = document.createElement("td8");
        let td9 = document.createElement("td9");
        let td10 = document.createElement("td10");
        let td11 = document.createElement("td11");
        let td12 = document.createElement("td12");
        let td13 = document.createElement("td13");
        let td14 = document.createElement("td14");
        let td15 = document.createElement("td15");

        td1.innerHTML = fn;
        td2.innerHTML = ln;
        td3.innerHTML = a;
        td4.innerHTML = g;
        td5.innerHTML = n;
        td6.innerHTML = no;
        td7.innerHTML = sh;
        td8.innerHTML = wk;
        td9.innerHTML = st;
        td10.innerHTML = da;
        td11.innerHTML = sm;
        td12.innerHTML = so;
        td13.innerHTML = ou;
        td14.innerHTML = sf;
        td15.innerHTML = vg;

        trow.appendChild(td1);
        trow.appendChild(td2);
        trow.appendChild(td3);
        trow.appendChild(td4);
        trow.appendChild(td5);
        trow.appendChild(td6);
        trow.appendChild(td7);
        trow.appendChild(td8);
        trow.appendChild(td9);
        trow.appendChild(td10);
        trow.appendChild(td11);
        trow.appendChild(td12);
        trow.appendChild(td13);
        trow.appendChild(td14);
        trow.appendChild(td15);

        tbody.appendChild(trow);
      
      }

      function eletotable(roommate){
        // sno = 0;
        tbody.innerHTML = "";
        roommate.forEach((element) => {
        
      
          additemstotable(element.fname, element.lname, element.age, element.gender, element.tidy, element.noise, element.share, element.wake, element.study, element.alcohol, element.smoking, element.intro, element.partying, element.out, element.gaming);
        });

      }
      async function getalldata(){
        const querysnapshot = await getDocs(collection(db, "mavcomplete-fs-roommate"));

        var roommate = [];
        querysnapshot.forEach((doc) => {
          roommate.push(doc.data());
        });
        console.log(roommate);
        eletotable(roommate);
      }

      async function getalldatart(){
        const dbref = collection(db, "mavcomplete-fs-roommate");

        var roommate = [];
        onsnapshot(dbref, (querysnapshot) => {
          var roommate = [];
          querysnapshot.forEach((doc) => {

            roommate.push(doc.data());
          });
          eletotable(roommate);
          // console.log(roommate);
        });
        
    
      }

      window.onload = getalldata;
    </script>    

    </html>
  